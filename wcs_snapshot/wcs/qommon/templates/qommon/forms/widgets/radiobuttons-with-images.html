{% extends "qommon/forms/widgets/radiobuttons.html" %}

{% block widget-style-attributes %}
  {% if widget.field.image_desktop_size %}--image-desktop-width: {{ widget.field.image_desktop_size|split:'x'|first }}px;--image-desktop-height: {{ widget.field.image_desktop_size|split:'x'|last }}px;{% endif %}{% if widget.field.image_mobile_size %}--image-mobile-width: {{ widget.field.image_mobile_size|split:'x'|first }}px;--image-mobile-height: {{ widget.field.image_mobile_size|split:'x'|last }}px;{% endif %}{{ block.super }}
{% endblock %}

{% block widget-control %}
  <template id="item_{{ widget.get_name_for_id }}">
    <label class="item-with-image">
      <input {% for attr in widget.attrs.items %}{{attr.0}}="{{attr.1}}" {% endfor %}
             type="radio"
             name="{{widget.name}}"
             {% if widget.readonly %}disabled{% else %}name="{{ option.name }}"{% endif %}
             class="item-with-image--input" />
      <img  alt="" class="item-with-image--picture" />
      <span class="item-with-image--label"></span>
    </label>
  </template>
  {% for option in widget.get_options %}
    <label for="{{ widget.get_name_for_id }}_op_{{ forloop.counter0 }}" class="item-with-image">
      <input id="{{ widget.get_name_for_id }}_op_{{ forloop.counter0 }}"
             {% if option.selected %}checked="checked" {% endif %}
             {% if widget.attrs.readonly %}disabled="disabled"{% else %}name="{{ widget.name }}"{% endif %}
             {% for attr in widget.attrs.items %}{{attr.0}}="{{attr.1}}" {% endfor %}
             type="radio" value="{{ option.value }}" class="item-with-image--input" />
      {% if widget.attrs.readonly and option.selected %}<input type="hidden" name="{{ widget.name }}" value="{{ option.value }}">{% endif %}
      {% if option.image_url %}<img src="{{ option.image_url }}" title="{{ option.label }}" alt=""  class="item-with-image--picture" />{% endif %}
      <span class="item-with-image--label">{{ option.label }}</span>
    </label>
    {% if not forloop.last %}{{ widget.delim|safe }}{% endif %}
  {% endfor %}
{% endblock %}
