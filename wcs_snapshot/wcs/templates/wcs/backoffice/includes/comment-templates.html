{% load i18n %}
{% if categories %}
  {% for category in categories %}
    {% if category.comment_templates %}
      {% with section_folded_pref_name="folded-admin-commenttemplates-category-"|add:category.id %}
        <div class="section foldable {% if user|get_preference:section_folded_pref_name %}folded{% endif %}"
             data-section-folded-pref-name="{{ section_folded_pref_name }}">
          <h2>{{ category.name }}</h2>
          <ul class="objects-list single-links">
            {% for comment_template in category.comment_templates %}
              <li>
                <a href="{{ comment_template.get_admin_url }}">
                  {% if not application %}{% include 'wcs/backoffice/includes/application_icons.html' with object=comment_template %}{% endif %}
                  {{ comment_template.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endwith %}
    {% endif %}
  {% endfor %}
{% elif comment_templates %}
  <ul class="objects-list single-links">
    {% for comment_template in comment_templates %}
      <li>
        <a href="{{ comment_template.get_admin_url }}">
          {% if not application %}{% include 'wcs/backoffice/includes/application_icons.html' with object=comment_template %}{% endif %}
          {{ comment_template.name }}
        </a>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <div class="infonotice">
    {% trans "There are no comment templates defined." %}
  </div>
{% endif %}
