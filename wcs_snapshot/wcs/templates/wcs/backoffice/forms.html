{% extends "wcs/backoffice.html" %}
{% load i18n %}

{% block appbar-title %}{% trans "Forms" %}{% endblock %}
{% block appbar-bottom %}
  <label class="sr-only" for="appbar-search">{% trans "Search:" %}</label>
  <input type="search" placeholder="{% trans "Quick search" %}" name="q" id="appbar-search" value="{{q|default:""}}">
{% endblock %}

{% block pre-content %}
  {% if is_global_accessible_forms and has_urgent_deprecations %}
    {% include "wcs/includes/urgent_deprecations.html" %}
  {% endif %}
{% endblock %}

{% block body %}
  {% if not has_roles %}
    <p>{% trans "You first have to define roles." %}</p>
  {% elif objects %}
    {% include 'wcs/backoffice/includes/forms.html' with section=view.section %}
  {% else %}
    <div class="infonotice">
      {% block no-objects %}
        {% trans "There are no forms defined." %}
      {% endblock %}
    </div>
  {% endif %}
{% endblock %}

{% block sidebar-content %}
  {% if has_roles %}
    <h3>{% trans "Actions" %}</h3>
    <a class="button button-paragraph" rel="popup" href="new">{% trans "New Form" %}</a>
    <a class="button button-paragraph" rel="popup" href="import">{% trans "Import" %}</a>

    <h3>{% trans "Navigation" %}</h3>
    {% if is_global_accessible_forms %}
      {% if is_global_accessible_categories %}
        <a class="button button-paragraph" href="categories/">{% trans "Categories" %}</a>
      {% endif %}
    {% endif %}
    {% if publisher.get_backoffice_root.forms.blocks.is_accessible %}
      <a class="button button-paragraph" href="blocks/">{% trans "Blocks of fields" %}</a>
    {% endif %}
    {% if publisher.get_backoffice_root.forms.data_sources.is_accessible %}
      <a class="button button-paragraph" href="data-sources/">{% trans "Data sources" %}</a>
    {% endif %}

    {% include 'wcs/backoffice/includes/applications.html' %}
  {% endif %}
{% endblock %}
