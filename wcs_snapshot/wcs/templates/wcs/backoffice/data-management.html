{% extends "wcs/backoffice/base.html" %}
{% load i18n %}

{% block appbar-title %}{% trans "Cards" %}{% endblock %}

{% block content %}
  {% regroup view.get_carddefs by category.id as category_list %}
  {% for category_id, object_list in category_list %}
    {% with section_folded_pref_name="folded-data-cards-category-"|add:category_id %}
      <div class="section foldable {% if user|get_preference:section_folded_pref_name %}folded{% endif %}" data-section-folded-pref-name="{{ section_folded_pref_name }}">
        {% if not forloop.first or category_id %}<h3>{{ object_list.0.category.name|default:_('Misc') }}</h3>{% endif %}
        <ul class="objects-list single-links">
          {% for carddef in object_list %}
            <li><a href="{{ carddef.url_name }}/">{{ carddef.name }}</a></li>
          {% endfor %}
        </ul>
      </div>
    {% endwith %}
  {% endfor %}
{% endblock %}
