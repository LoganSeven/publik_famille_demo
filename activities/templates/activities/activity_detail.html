{% extends 'base.html' %}
{% block content %}
  <div class="section">
    <div class="card">
      <div class="card-content">
        <span class="card-title">{{ activity.title }}</span>
        <p>{{ activity.description }}</p>
        <p><strong>Tarif :</strong> {{ activity.fee }} €</p>
        <p><strong>Date :</strong> {{ activity.start_date }} — {{ activity.end_date }}</p>
      </div>
    </div>

    {% if can_enroll %}
      {% if user.is_authenticated %}
        <div class="card">
          <div class="card-content">
            <span class="card-title">Inscrire un enfant</span>
            <form method="post" action="{% url 'activities:enroll' activity.pk %}">
              {% csrf_token %}
              {{ form.as_p }}
              <button type="submit" class="btn green waves-effect">INSCRIRE</button>
              <a href="{% url 'activities:list' %}" class="btn-flat">RETOUR</a>
            </form>
          </div>
        </div>
      {% else %}
        <p><a href="{% url 'login' %}">Connectez-vous</a> pour inscrire un enfant.</p>
      {% endif %}
    {% else %}
      <p>Cette activité est terminée – inscription impossible.</p>
    {% endif %}
  </div>
{% endblock %}
