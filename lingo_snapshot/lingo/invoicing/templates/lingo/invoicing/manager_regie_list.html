{% extends "lingo/manager_homepage.html" %}
{% load i18n %}

{% block page-title-extra-label %}{% trans "Regies" %}{% endblock %}

{% block breadcrumb %}
  {{ block.super }}
  {% url 'lingo-manager-invoicing-regie-list' as object_list_url %}
  <a href="{{ object_list_url }}">{% trans "Regies" %}</a>
  {% include 'lingo/includes/application_breadcrumb_fragment.html' with title_no_application=_('Regies outside applications') %}
{% endblock %}

{% block appbar %}
  {% include 'lingo/includes/application_appbar_fragment.html' with title_no_application=_('Regies outside applications') title_object_list=_('Regies') %}
{% endblock %}

{% block content %}
  {% if object_list %}
    <div>
      <ul class="objects-list single-links">
        {% for regie in object_list %}
          <li>
            <a href="{% url 'lingo-manager-invoicing-regie-detail' pk=regie.pk %}">
              {% include 'lingo/includes/application_icon_fragment.html' with object=regie %}
              {{ regie.label }}
              <span class="extra-info"> [{% trans "identifier:" %} {{ regie.slug }}]</span>
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% elif not no_application %}
    <div class="big-msg-info">
      {% blocktrans %}
        This site doesn't have any regie yet. Click on the "New" button in the top
        right of the page to add a first one.
      {% endblocktrans %}
    </div>
  {% endif %}
{% endblock %}

{% block sidebar %}
  {% if not application and not no_application %}
    <aside id="sidebar">

      <form action="{% url 'lingo-manager-invoicing-regie-goto' %}">
        <h3 id="regie-goto-doc-label">{% trans "Go to document" %}</h3>
        <input type="search" name="reference" placeholder="{% trans "invoice or credit reference" %}" aria-labelledby="regie-goto-doc-label">
        <button type="submit">{% trans "Search" %}</button>
      </form>

      {% if user.is_staff %}
        <h3>{% trans "Actions" %}</h3>
        <a class="button button-paragraph" rel="popup" href="{% url 'lingo-manager-invoicing-regie-add' %}">{% trans 'New regie' %}</a>
        <a class="button button-paragraph" rel="popup" href="{% url 'lingo-manager-invoicing-config-import' %}">{% trans 'Import site' %}</a>
        <a class="button button-paragraph" rel="popup" href="{% url 'lingo-manager-invoicing-config-export' %}" data-autoclose-dialog="true">{% trans 'Export site' %}</a>

        <h3>{% trans "Navigation" %}</h3>
        <a class="button button-paragraph" href="{% url 'lingo-manager-invoicing-appearance-settings' %}">{% trans "Appearance Settings" %}</a>
        <a class="button button-paragraph" href="{% url 'lingo-manager-invoicing-cancellation-reason-list' %}">{% trans "Cancellation reasons" %}</a>
      {% endif %}

      {% include 'lingo/includes/application_list_fragment.html' with title_no_application=_('Regies outside applications') %}

    </aside>
  {% endif %}
{% endblock %}
