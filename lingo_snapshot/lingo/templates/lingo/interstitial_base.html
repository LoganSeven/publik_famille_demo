{% extends "mini-base.html" %}
{% load i18n %}

{% block extra_css %}
  <style>
    #continue {
      margin-top: 3em;
    }

    .loader {
      margin: 2em auto;
      width: 40px;
      height: 30px;
      aspect-ratio: 1;
      --c: linear-gradient(var(--primary-color) 0 0);
      --r1: radial-gradient(farthest-side at bottom, var(--primary-color) 93%, var(--primary-color));
      --r2: radial-gradient(farthest-side at top   , var(--primary-color) 93%, var(--primary-color));
      background: var(--c), var(--r1), var(--r2), var(--c), var(--r1), var(--r2), var(--c), var(--r1), var(--r2);
      background-repeat: no-repeat;
      animation: l2 1s infinite alternate;
    }
    @keyframes l2 {
      0%,25% {
        background-size: 8px 0, 8px 4px, 8px 4px, 8px 0, 8px 4px, 8px 4px, 8px 0, 8px 4px, 8px 4px;
        background-position: 0 50%, 0 calc(50% - 2px), 0 calc(50% + 2px), 50% 50%, 50% calc(50% - 2px), 50% calc(50% + 2px), 100% 50%, 100% calc(50% - 2px), 100% calc(50% + 2px);
      }
      50% {
        background-size: 8px 100%, 8px 4px, 8px 4px, 8px 0, 8px 4px, 8px 4px, 8px 0, 8px 4px, 8px 4px;
        background-position: 0 50%, 0 calc(0% - 2px), 0 calc(100% + 2px), 50% 50%, 50% calc(50% - 2px), 50% calc(50% + 2px), 100% 50%, 100% calc(50% - 2px), 100% calc(50% + 2px);
      }
      75% {
        background-size: 8px 100%, 8px 4px, 8px 4px, 8px 100%, 8px 4px, 8px 4px, 8px 0, 8px 4px, 8px 4px;
        background-position: 0 50%, 0 calc(0% - 2px), 0 calc(100% + 2px), 50% 50%, 50% calc(0% - 2px), 50% calc(100% + 2px), 100% 50%, 100% calc(50% - 2px), 100% calc(50% + 2px);
      }
      95%,100% {
        background-size: 8px 100%, 8px 4px,  8px 4px, 8px 100%, 8px 4px, 8px 4px, 8px 100%, 8px 4px, 8px 4px;
        background-position: 0 50%, 0 calc(0% - 2px), 0 calc(100% + 2px), 50% 50%, 50% calc(0% - 2px), 50% calc(100% + 2px), 100% 50%, 100% calc(0% - 2px), 100% calc(100% + 2px);
      }
    }
    #expiration {
      transition: transform 2s ease-out;
      transform: scale(1);
    }
    #expiration.boom {
      position: absolute;
      right: 50%;
      transform: scale(300);
    }
  </style>
  {% block extrascripts %}
    <script>
      window.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('.form-disable-on-submit')

        if (form) {
          const button = form.querySelector('button')
          window.addEventListener('pageshow', (ev) => {  // reset
            form.classList.remove('form-being-submitted')
            button.disabled = false
          })

          form.addEventListener('submit', (ev) => {
            if (form.classList.contains('form-being-submitted')) {
              ev.preventDefault()
              return false
            }
            form.classList.add('form-being-submitted')
            button.disabled = true
          })
        }
      })
    </script>
  {% endblock %}
{% endblock %}
